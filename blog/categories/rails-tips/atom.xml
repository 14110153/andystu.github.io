<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Rails Tips | AndyZ Blog]]></title>
  <link href="http://andystu.github.io/blog/categories/rails-tips/atom.xml" rel="self"/>
  <link href="http://andystu.github.io/"/>
  <updated>2015-01-03T11:11:08+08:00</updated>
  <id>http://andystu.github.io/</id>
  <author>
    <name><![CDATA[Yu-Chieh Chang (張又介)]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Rails Tips: Rails G Scaffold for Reference Field]]></title>
    <link href="http://andystu.github.io/blog/2015/01/03/rails-tips-rails-g-scaffold-for-reference-field/"/>
    <updated>2015-01-03T11:02:27+08:00</updated>
    <id>http://andystu.github.io/blog/2015/01/03/rails-tips-rails-g-scaffold-for-reference-field</id>
    <content type="html"><![CDATA[<p>Rails scaffold generators are very smart! you can use belongs_to to quickly add relations.
In the following example, I have 2 models products and product_types;
Product_types belong to product and product has many product types.</p>

<pre><code class="bash">$ rails g scaffold product name:string
$ rails g scaffold product_type name:string product:belongs_to

# You can also use :references
$ rails g scaffold product_type name:string product:references

# For more manually work, you can do it like this
$ rails g scaffold product_type name:string product_id:integer
# then add "belongs_to" in your ProductType model
</code></pre>

<p>This will generate the necessary columns, indexes and associations in your models.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Rails Tips: Link_to Helper for params.merge]]></title>
    <link href="http://andystu.github.io/blog/2015/01/02/rails-tips-link-to-helper-for-params-dot-merge/"/>
    <updated>2015-01-02T16:52:02+08:00</updated>
    <id>http://andystu.github.io/blog/2015/01/02/rails-tips-link-to-helper-for-params-dot-merge</id>
    <content type="html"><![CDATA[<h3></h3>

<ul>
<li>To preserve the params of url I did this:
<figure class='code'><figcaption><span>app/views/index.html.erb</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="o">&amp;</span><span class="n">hellip</span><span class="p">;</span><span class="o">&lt;</span><span class="sr">/li&gt;</span>
</span><span class='line'><span class="sr">&lt;/u</span><span class="n">l</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nb">p</span><span class="o">&gt;&amp;</span><span class="n">lt</span><span class="p">;</span><span class="sx">%= link_to &amp;lsquo;Foot type&amp;rsquo;, url_for(params.merge(foot_type_id: value)) %&gt;</span>
</span><span class='line'><span class="sx">&amp;hellip;&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="sx">&lt;pre&gt;&lt;code&gt;&lt;/code&gt;&lt;/pre&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="sx">&lt;p&gt;&amp;hellip;</span>
</span><span class='line'><span class="sx">  def index</span>
</span><span class='line'><span class="sx">    @recipes =</span> <span class="no">Recipe</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="kp">nil</span><span class="p">)</span>
</span><span class='line'>    <span class="vi">@recipes</span> <span class="o">=</span> <span class="vi">@recipes</span><span class="o">.</span><span class="n">food_type_of</span><span class="p">(</span><span class="n">params</span><span class="o">[</span><span class="ss">:food_type_id</span><span class="o">]</span><span class="p">)</span> <span class="k">if</span> <span class="p">(</span><span class="n">params</span><span class="o">[</span><span class="ss">:food_type_id</span><span class="o">]</span><span class="p">)</span>
</span><span class='line'>    <span class="vi">@recipes</span> <span class="o">=</span> <span class="vi">@recipes</span><span class="o">.</span><span class="n">food_preference_of</span><span class="p">(</span><span class="n">params</span><span class="o">[</span><span class="ss">:food_preference_id</span><span class="o">]</span><span class="p">)</span> <span class="k">if</span> <span class="p">(</span><span class="n">params</span><span class="o">[</span><span class="ss">:food_preference_id</span><span class="o">]</span><span class="p">)</span>
</span><span class='line'>    <span class="vi">@recipes</span> <span class="o">=</span> <span class="vi">@recipes</span><span class="o">.</span><span class="n">cuisine_of</span><span class="p">(</span><span class="n">params</span><span class="o">[</span><span class="ss">:cuisine_id</span><span class="o">]</span><span class="p">)</span> <span class="k">if</span> <span class="p">(</span><span class="n">params</span><span class="o">[</span><span class="ss">:cuisine_id</span><span class="o">]</span><span class="p">)</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="o">&amp;</span><span class="n">hellip</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure></p>

<h3>alternative solutions</h3>

<p><a href="http://filterrific.clearcove.ca">http://filterrific.clearcove.ca</a> <br/>
<a href="http://www.lauradhamilton.com/how-to-filter-by-multiple-options-filterrific-rails">http://www.lauradhamilton.com/how-to-filter-by-multiple-options-filterrific-rails</a> <br/>
<a href="https://github.com/plataformatec/has_scope">https://github.com/plataformatec/has_scope</a></p>

<h4>[reference]</h4>

<p><a href="http://apidock.com/rails/v3.2.13/ActionView/Helpers/UrlHelper/url_for  ">http://apidock.com/rails/v3.2.13/ActionView/Helpers/UrlHelper/url_for  </a>
<a href="http://stackoverflow.com/questions/6625293/how-to-add-parameters-to-current-url-in-rails">http://stackoverflow.com/questions/6625293/how-to-add-parameters-to-current-url-in-rails</a> <br/>
<a href="http://www.justinweiss.com/blog/2014/02/17/search-and-filter-rails-models-without-bloating-your-controller/">http://www.justinweiss.com/blog/2014/02/17/search-and-filter-rails-models-without-bloating-your-controller/</a> <br/>
<a href="http://guides.rubyonrails.org/active_record_querying.html#scopes">http://guides.rubyonrails.org/active_record_querying.html#scopes</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[RubyGems: Brakeman and Rails_best_practices]]></title>
    <link href="http://andystu.github.io/blog/2015/01/02/gems-brakeman-and-rails-best-practices/"/>
    <updated>2015-01-02T10:04:02+08:00</updated>
    <id>http://andystu.github.io/blog/2015/01/02/gems-brakeman-and-rails-best-practices</id>
    <content type="html"><![CDATA[<h3>brakeman : Ruby on Rails 專案安全性檢測工具</h3>

<p><code>Brakeman is an open source vulnerability scanner specifically designed for Ruby on Rails applications. It statically analyzes Rails application code to find security issues at any stage of development.</code></p>

<h3>rails_best_practices : Ruby on Rails 專案程式碼品質評測工具</h3>

<p><code>rails_best_practices is a code metric tool to check the quality of rails codes.</code></p>

<h3>installation (add those gems to your Gemfile)</h3>

<pre><code class="ruby ">group :development do
  gem "brakeman", require: false  
  gem "rails_best_practices", require: false
end

# require: false =&gt; means that we don't want to run that gem when start rails server
</code></pre>

<h3>usage (recommand using those tools before each commit)</h3>

<pre><code>$ brakeman  
# report screenshot
+SUMMARY+

+-------------------+-------+
| Scanned/Reported  | Total |
+-------------------+-------+
| Controllers       | 2     |
| Models            | 5     |
| Templates         | 6     |
| Errors            | 0     |
| Security Warnings | 0 (0) |
+-------------------+-------+

$ rails_best_practices  
# report screenshot
Source Codes: |======================================================================================================================================|
rails_app/db/schema.rb:34 - always add db index (recipes =&gt; [food_type_id])
rails_app/db/schema.rb:34 - always add db index (recipes =&gt; [food_preference_id])
rails_app/db/schema.rb:34 - always add db index (recipes =&gt; [cuisine_id])
rails_app/app/views/recipes/index.html.erb:24 - law of demeter
rails_app/app/views/recipes/index.html.erb:25 - law of demeter
rails_app/app/views/recipes/index.html.erb:26 - law of demeter
rails_app/app/helpers/recipes_helper.rb:1 - remove empty helpers
rails_app/app/models/recipe.rb:8 - remove unused methods (Recipe#food_type_of)
rails_app/app/models/recipe.rb:9 - remove unused methods (Recipe#food_preference_of)
rails_app/app/models/recipe.rb:10 - remove unused methods (Recipe#cuisine_of)
rails_app/app/views/recipes/_form.html.erb:1 - replace instance variable with local variable
rails_app/app/views/recipes/_form.html.erb:2 - replace instance variable with local variable
rails_app/app/views/recipes/_form.html.erb:4 - replace instance variable with local variable
rails_app/app/views/recipes/_form.html.erb:7 - replace instance variable with local variable
rails_app/app/models/recipe.rb:8 - remove trailing whitespace
</code></pre>

<h4>[reference]</h4>

<p><a href="http://brakemanscanner.org">http://brakemanscanner.org</a> <br/>
<a href="http://rails101s.logdown.com/posts/247140-20-1-0-create-a-rails-project">http://rails101s.logdown.com/posts/247140-20-1-0-create-a-rails-project</a>  <br/>
<a href="https://github.com/railsbp/rails_best_practices">https://github.com/railsbp/rails_best_practices</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Rails Tips: List Models (Tables) (How-to)]]></title>
    <link href="http://andystu.github.io/blog/2015/01/01/list-models-tables-in-rails-console-how-to/"/>
    <updated>2015-01-01T10:26:13+08:00</updated>
    <id>http://andystu.github.io/blog/2015/01/01/list-models-tables-in-rails-console-how-to</id>
    <content type="html"><![CDATA[<pre><code class="ruby">$ rails c
 ActiveRecord::Base.connection.tables.each do |table_name|
  puts "\n" + table_name
  ActiveRecord::Base.connection.columns(table_name).each {|c| puts "- " + c.name + ": " + c.type.to_s + " " + c.limit.to_s}
 end

# or
 Model.column_names

# or
 Model
</code></pre>

<pre><code class="ruby">&gt; ActiveRecord::Base.connection.tables # list all models retuen as an array
&gt; ActiveRecord::Base.connection.columns(table_name) # list model(table) detail
</code></pre>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Some Link_to Usage Tips]]></title>
    <link href="http://andystu.github.io/blog/2014/12/31/link-to-usage-tips/"/>
    <updated>2014-12-31T16:57:16+08:00</updated>
    <id>http://andystu.github.io/blog/2014/12/31/link-to-usage-tips</id>
    <content type="html"><![CDATA[<h3>some tips for link_to helper</h3>

<pre><code class="ruby">#in view/xxxx.html.erb

&lt;%= link_to "LINK_NAME", xxx_path %&gt;

&lt;%= link_to "LINK_NAME", "LINK_URL", id: "ID_NAME", class: "CLASS_NAME" %&gt;


# use it like a block
# 1
link_to "LINK_URL" do 
  image_tag "IMAGE_FILE"
end

# 2
link_to xxx_path do 
  image_tag "IMAGE_FILE"
end
</code></pre>
]]></content>
  </entry>
  
</feed>
